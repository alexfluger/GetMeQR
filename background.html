<!DOCTYPE html>
<html>
<head>
    <script>
        chrome.contextMenus.create({
            "title": 'GetMeQR',
            "contexts":['link'],
            "onclick": function(info, tab){
                chrome.windows.create({
                    'url': 'qrcode.html',
                    'width': 409,
                    'height': 429,
                    'focused': true,
                    'type': 'popup'
                },
                function(wnd){

                    var view = chrome.extension.getViews({
                        'windowId': wnd.tabs[0].windowId
                    })[0];

                    view.document.getElementById('image-qr').src = 'https://chart.googleapis.com/chart?chs=342x342&cht=qr&chl=' + info.linkUrl;
                });
            }
        });
    </script>
</head>
<body>

</body>
</html>