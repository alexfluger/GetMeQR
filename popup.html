<!DOCTYPE html>
<html>
    <head>
        <script>

            function updateQR(data)
            {

                var qrImage = document.getElementById('image-qr');

                qrImage.src = 'https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=' + data;

            }

            function getCurrentUrlQR()
            {
                chrome.tabs.getSelected(null, function(tab){

                    updateQR(tab.url);

                });
            }

            function getCurrentSelectionQR()
            {

                chrome.tabs.getSelected(null, function(tab) {

                    chrome.tabs.sendRequest(tab.id, {method: 'getSelection'}, function (response) {

                        updateQR(response.data);

                    });
                });
            }

            function getClipboardQR()
            {

                var clip = document.getElementById('clipboard-content');
                clip.value = '';
                clip.focus();
                document.execCommand('paste');

                updateQR(clip.value);

            }
            
        </script>
    </head>

    <body>
        <button onclick="getCurrentUrlQR();">
            Current URL
        </button>
        <button onclick="getCurrentSelectionQR();">
            Current Selection
        </button>
        <button onclick="getClipboardQR();">
            Clipboard
        </button>
        <img id="image-qr" src="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=http://sheepnram.com" alt="QR Code" />
        <textarea id="clipboard-content" style="opacity: 0;"></textarea>
    </body>
</html>