<!DOCTYPE html>
<html>
    <head>
        <script>

            function getCurrentUrlQR()
            {
                chrome.tabs.getSelected(null, function(tab){

                    var qrImage = document.getElementById('image-qr');

                    qrImage.src = 'https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=' + tab.url;

                });
            }

            function getCurrentSelectionQR()
            {

                chrome.tabs.getSelected(null, function(tab) {

                    chrome.tabs.sendRequest(tab.id, {method: "getSelection"}, function (response) {

                        var qrImage = document.getElementById('image-qr');

                        qrImage.src = 'https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=' + response.data;

                    });
                });
            }
            
        </script>
    </head>

    <body>
        <button onclick="getCurrentUrlQR();">
            Current URL
        </button>
        <button onclick="getCurrentSelectionQR();">
            Current Selection
        </button>
        <button>
            Clipboard
        </button>
        <img id="image-qr" src="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=http://sheepnram.com" alt="QR Code" />
    </body>
</html>